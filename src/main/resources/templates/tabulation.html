<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Lr9 MV 4157st</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h1 class="fw-bold">Табулювання функції</h1>
    <hr>
    <form method="post" action="/calculate" class="mb-3">
        <div class="row mb-2">
            <div class="col">
                <label class="form-label">Початок (start):</label>
                <input type="number" step="any" name="start" class="form-control" value="0.0" required>
            </div>
            <div class="col">
                <label class="form-label">Кінець (end):</label>
                <input type="number" step="any" name="end" class="form-control" value="3.0" required>
            </div>
            <div class="col">
                <label class="form-label">Крок (step):</label>
                <input type="number" step="any" name="step" class="form-control" value="0.004" required>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col">
                <label class="form-label">a:</label>
                <input type="number" step="any" name="a" class="form-control" value="-0.5" required>
            </div>
            <div class="col">
                <label class="form-label">b:</label>
                <input type="number" step="any" name="b" class="form-control" value="2" required>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Обчислити</button>
    </form>
    <div th:if="${arguments != null}">
        <div class="d-flex">
            <div class="me-4">
                <h2 class="fw-semibold">Результати</h2>
                <ul>
                    <li>Кроки табуляції: <b class="text-primary" th:text="${arguments.length}"></b></li>
                    <li>Максимальне значення: <b class="text-primary" th:text="${values[minIndex]}"></b> 
                        (X = <b class="text-primary" th:text="${arguments[minIndex]}"></b>, Індекс: <b class="text-primary" th:text="${minIndex}"></b>)
                    </li>
                    <li>Максимальне значення: <b class="text-primary" th:text="${values[maxIndex]}"></b>
                        (X = <b class="text-primary" th:text="${arguments[maxIndex]}"></b>, Індекс: <b class="text-primary" th:text="${maxIndex}"></b>)
                    </li>
                    <li>Сума елементів масиву значень функцій: <b class="text-primary" th:text="${sum}"></b></li>
                    <li>Середнє значення: <b class="text-primary" th:text="${average}"></b></li>
                </ul>
            </div>
            <div>
                <h3 class="fw-semibold">Тестові значення</h3>
                <ul>
                    <li th:each="idx : ${testIndexes}">
                        <span>Індекс: <b class="text-primary" th:text="${idx}"></b> x: <b class="text-primary" th:text="${arguments[idx]}"></b> y: <b class="text-primary" th:text="${values[idx]}"></b></span>
                    </li>
                </ul>
            </div>
        </div>
        <table class="table table-bordered table-striped table-primary table-sm">
            <thead>
                <tr>
                    <th>#</th>
                    <th>x</th>
                    <th>y</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="x,iter : ${arguments}">
                    <td th:text="${iter.index}"></td>
                    <td th:text="${x}"></td>
                    <td th:text="${values[iter.index]}"></td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>